
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MY SPORT</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 3px; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        const SPORT_TYPES = {
          BASEBALL: 'baseball',
          VOLLEYBALL: 'volleyball',
          BADMINTON: 'badminton'
        };

        const sportsData = {
          baseball: {
            id: 'baseball',
            type: SPORT_TYPES.BASEBALL,
            title: 'í•œí™” ì´ê¸€ìŠ¤',
            subtitle: '2025 KBO ì‹œì¦Œ ìµœì¢… ìˆœìœ„',
            route: '/baseball/hanwha',
            emoji: 'âš¾',
            bgColor: 'bg-gray-800',
            ranking: { rank: 2, wins: 83, losses: 57, draws: 4, winRate: 0.593, gameDiff: 1.5 }
          },
          volleyball: {
            id: 'volleyball',
            type: SPORT_TYPES.VOLLEYBALL,
            title: 'í˜„ëŒ€ìºí”¼íƒˆ ìŠ¤ì¹´ì´ì›Œì»¤ìŠ¤',
            subtitle: 'V-ë¦¬ê·¸ ì‹œì¦Œ ì¤‘',
            route: '/volleyball/hyundai-capital',
            emoji: 'ğŸ',
            bgColor: 'bg-gray-800',
            ranking: { rank: 2, wins: 8, losses: 6, points: 1, setRatio: 1.033 },
            nextMatch: { opponent: 'vs ëŒ€í•œí•­ê³µ', date: '12ì›” 16ì¼', time: '19:00', location: 'ì²œì•ˆìœ ê´€ìˆœì²´ìœ¡ê´€' }
          },
          anseyoung: {
            id: 'anseyoung',
            type: SPORT_TYPES.BADMINTON,
            title: 'ì•ˆì„¸ì˜',
            subtitle: 'BWF ì›”ë“œíˆ¬ì–´ íŒŒì´ë„ìŠ¤',
            route: '/player/anseyoung',
            emoji: 'ğŸ¸',
            bgColor: 'bg-gray-800',
            tournament: {
              name: 'BWF ì›”ë“œíˆ¬ì–´ íŒŒì´ë„ìŠ¤',
              location: 'ì¤‘êµ­ í•­ì €ìš°',
              startDate: new Date('2025-12-17'),
              endDate: new Date('2025-12-21'),
              status: 'upcoming'
            }
          }
        };

        const SportCard = ({ data, onClick }) => {
          if (!data) {
            return (
              <div className="bg-gray-800 border border-gray-700 flex items-center justify-center">
                <p className="text-gray-500 text-lg">ì‹œì¦Œ ëŒ€ê¸° ì¤‘</p>
              </div>
            );
          }

          const getTournamentStatus = (tournament) => {
            if (!tournament) return null;
            const today = new Date();
            const start = tournament.startDate;
            const end = tournament.endDate;
            
            if (today < start) {
              const daysUntil = Math.ceil((start - today) / (24 * 60 * 60 * 1000));
              return { status: 'upcoming', text: `D-${daysUntil}` };
            } else if (today >= start && today <= end) {
              return { status: 'ongoing', text: 'ê²½ê¸° ì¤‘' };
            } else {
              return { status: 'completed', text: 'ëŒ€íšŒ ì¢…ë£Œ' };
            }
          };
          
          const tournamentStatus = data.tournament ? getTournamentStatus(data.tournament) : null;
          
          const formatDate = (date) => {
            return date.toLocaleDateString('ko-KR', { month: 'short', day: 'numeric' });
          };
          
          return (
            <div
              onClick={onClick}
              className={`${data.bgColor} border border-gray-700 cursor-pointer transform transition-all duration-300 hover:brightness-110 flex items-center justify-center p-6 relative overflow-y-auto custom-scrollbar`}
            >
              <div className="flex flex-col items-center justify-center text-white text-center w-full h-full">
                {/* ì‘ì€ í™”ë©´: ì´ëª¨ì§€ë§Œ */}
                <div className="text-8xl lg:hidden">{data.emoji}</div>
                
                {/* í° í™”ë©´ (960px+): ì „ì²´ ì •ë³´ */}
                <div className="hidden lg:flex lg:flex-col lg:items-center lg:justify-start w-full">
                  <div className="text-6xl mb-4">{data.emoji}</div>
                  <h2 className="text-2xl font-bold mb-2 flex-shrink-0">{data.title}</h2>
                  <p className="text-white text-opacity-90 text-sm mb-3 flex-shrink-0">{data.subtitle}</p>
                
                {data.tournament && tournamentStatus?.status !== 'ongoing' && (
                  <div className="hidden lg:block mt-3 bg-black bg-opacity-30 px-4 py-3 rounded-lg w-full max-w-xs flex-shrink-0">
                    <div className="space-y-1.5 text-xs">
                      <div className="flex items-center justify-between">
                        <span className="text-white text-opacity-70">ëŒ€íšŒ</span>
                        <span className="font-semibold text-right">{data.tournament.name}</span>
                      </div>
                      <div className="flex items-center justify-between">
                        <span className="text-white text-opacity-70">ì¥ì†Œ</span>
                        <span className="font-semibold">{data.tournament.location}</span>
                      </div>
                      <div className="flex items-center justify-between">
                        <span className="text-white text-opacity-70">ê¸°ê°„</span>
                        <span className="font-semibold text-xs">
                          {formatDate(data.tournament.startDate)} ~ {formatDate(data.tournament.endDate)}
                        </span>
                      </div>
                      {tournamentStatus && (
                        <div className="pt-2 mt-2 border-t border-white border-opacity-20 text-center">
                          <span className={`inline-block px-3 py-1 rounded-full text-xs font-bold ${
                            tournamentStatus.status === 'ongoing' ? 'bg-green-500 text-white animate-pulse' :
                            tournamentStatus.status === 'upcoming' ? 'bg-blue-500 text-white' :
                            'bg-gray-500 text-white'
                          }`}>
                            {tournamentStatus.text}
                          </span>
                        </div>
                      )}
                    </div>
                  </div>
                )}
                
                {data.ranking && data.type === SPORT_TYPES.BASEBALL && (
                  <div className="hidden lg:block mt-3 bg-black bg-opacity-30 px-4 py-3 rounded-lg flex-shrink-0">
                    <div className="flex items-center gap-2 sm:gap-3">
                      <div className="text-center">
                        <p className="text-3xl sm:text-4xl font-bold">{data.ranking.rank}</p>
                        <p className="text-xs text-white text-opacity-70 mt-1">ìˆœìœ„</p>
                      </div>
                      <div className="h-10 w-px bg-white bg-opacity-30" />
                      <div className="text-left space-y-0.5">
                        <p className="text-xs">
                          <span className="font-semibold">{data.ranking.wins}</span> ìŠ¹ Â· 
                          <span className="font-semibold">{data.ranking.losses}</span> íŒ¨ Â· 
                          <span className="font-semibold">{data.ranking.draws}</span> ë¬´
                        </p>
                        <p className="text-xs">
                          ìŠ¹ë¥  <span className="font-semibold">{data.ranking.winRate.toFixed(3)}</span> Â· 
                          <span className="text-xs">ê²Œì„ì°¨ {data.ranking.gameDiff}</span>
                        </p>
                      </div>
                    </div>
                  </div>
                )}
                
                {data.ranking && data.type === SPORT_TYPES.VOLLEYBALL && (
                  <div className="hidden lg:block mt-3 bg-black bg-opacity-30 px-4 py-3 rounded-lg flex-shrink-0">
                    <div className="flex items-center gap-2 sm:gap-3 mb-2">
                      <div className="text-center">
                        <p className="text-3xl sm:text-4xl font-bold">{data.ranking.rank}</p>
                        <p className="text-xs text-white text-opacity-70 mt-1">ìˆœìœ„</p>
                      </div>
                      <div className="h-10 w-px bg-white bg-opacity-30" />
                      <div className="text-left space-y-0.5">
                        <p className="text-xs">
                          <span className="font-semibold">{data.ranking.wins}</span> ìŠ¹ Â· 
                          <span className="font-semibold">{data.ranking.losses}</span> íŒ¨
                        </p>
                        <p className="text-xs">
                          ìŠ¹ì  <span className="font-semibold">{data.ranking.points}</span> ì  Â· 
                          <span className="text-xs">ì„¸íŠ¸ë“ì‹¤ {data.ranking.setRatio.toFixed(3)}</span>
                        </p>
                      </div>
                    </div>
                    {data.nextMatch && (
                      <div className="pt-2 mt-2 border-t border-white border-opacity-20">
                        <p className="text-xs text-white text-opacity-70 mb-1.5">ë‹¤ìŒ ê²½ê¸°</p>
                        <div className="bg-white bg-opacity-10 rounded px-2.5 py-2">
                          <p className="font-bold text-xs mb-1">{data.nextMatch.opponent}</p>
                          <div className="flex items-center gap-2 text-xs text-white text-opacity-80">
                            <span>{data.nextMatch.date}</span>
                            <span>â€¢</span>
                            <span>{data.nextMatch.time}</span>
                          </div>
                          <p className="text-xs text-white text-opacity-60 mt-0.5">{data.nextMatch.location}</p>
                        </div>
                      </div>
                    )}
                  </div>
                )}
                
                {data.ranking && data.type === SPORT_TYPES.BADMINTON && (
                  <div className="hidden lg:block mt-3 bg-black bg-opacity-30 px-4 py-3 rounded-lg flex-shrink-0">
                    <div className="flex items-center gap-3">
                      <div className="text-center">
                        <p className="text-4xl font-bold">{data.ranking.rank}</p>
                        <p className="text-xs text-white text-opacity-70 mt-1">ì„¸ê³„ ìˆœìœ„</p>
                      </div>
                      <div className="h-10 w-px bg-white bg-opacity-30" />
                      <div className="text-left space-y-0.5">
                        <p className="text-xs">
                          í¬ì¸íŠ¸ <span className="font-semibold">{data.ranking.points?.toLocaleString()}</span>
                        </p>
                        <p className="text-xs">
                          ì°¸ê°€ ëŒ€íšŒ <span className="font-semibold">{data.ranking.tournaments}</span>ê°œ
                        </p>
                      </div>
                    </div>
                  </div>
                )}
                </div>
              </div>
            </div>
          );
        };

        const SportsDashboard = () => {
          const [currentPage, setCurrentPage] = useState('home');
          const [currentRoute, setCurrentRoute] = useState('');
          const [liveRankings, setLiveRankings] = useState(null);
          const [majorEventsData, setMajorEventsData] = useState(null);
          const [isLoading, setIsLoading] = useState(true);
          
          useEffect(() => {
            const fetchData = async () => {
              try {
                const rankingsResponse = await fetch('./data/sports-rankings.json');
                if (rankingsResponse.ok) {
                  const rankingsData = await rankingsResponse.json();
                  setLiveRankings(rankingsData);
                  console.log('âœ… ì‹¤ì‹œê°„ ìˆœìœ„ ë¡œë”© ì™„ë£Œ:', rankingsData);
                }
              } catch (error) {
                console.warn('âš ï¸ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê¸°ë³¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
              }
              
              try {
                const eventsResponse = await fetch('./data/major-events.json');
                if (eventsResponse.ok) {
                  const eventsData = await eventsResponse.json();
                  setMajorEventsData(eventsData);
                  console.log('âœ… êµ­ì œ ëŒ€íšŒ ì¼ì • ë¡œë”© ì™„ë£Œ:', eventsData);
                }
              } catch (error) {
                console.warn('âš ï¸ êµ­ì œ ëŒ€íšŒ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê¸°ë³¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
              }
              
              setIsLoading(false);
            };
            
            const timeout = setTimeout(() => setIsLoading(false), 3000);
            fetchData().finally(() => clearTimeout(timeout));
          }, []);
          
          const getNearestMajorEvent = (majorEventsData) => {
            const now = new Date();
            
            if (majorEventsData?.events) {
              for (const event of majorEventsData.events) {
                const start = new Date(event.startDate);
                const diff = start - now;
                
                if (diff > 0) {
                  const daysUntil = Math.ceil(diff / (24 * 60 * 60 * 1000));
                  return {
                    id: event.id,
                    title: event.title,
                    subtitle: `ê°œë§‰ D-${daysUntil}`,
                    route: `/event/${event.type}`,
                    emoji: event.emoji,
                    bgColor: 'bg-gray-800'
                  };
                }
              }
            }
            
            const fallbackEvents = [
              {
                id: 'olympics-2026-winter',
                title: '2026 ë°€ë¼ë…¸-ì½”ë¥´í‹°ë‚˜ ë™ê³„ì˜¬ë¦¼í”½',
                emoji: 'â›·ï¸',
                startDate: new Date('2026-02-06'),
                route: '/event/olympics-2026-winter'
              },
              {
                id: 'worldcup-2026',
                title: '2026 FIFA ì›”ë“œì»µ',
                emoji: 'âš½',
                startDate: new Date('2026-06-11'),
                route: '/event/worldcup-2026'
              },
              {
                id: 'asian-games-2026',
                title: '2026 ë‚˜ê³ ì•¼ ì•„ì‹œì•ˆê²Œì„',
                emoji: 'ğŸ…',
                startDate: new Date('2026-09-19'),
                route: '/event/asian-games-2026'
              },
              {
                id: 'olympics-2028-summer',
                title: '2028 LA í•˜ê³„ì˜¬ë¦¼í”½',
                emoji: 'ğŸƒ',
                startDate: new Date('2028-07-21'),
                route: '/event/olympics-2028-summer'
              }
            ];
            
            let nearestEvent = null;
            let minDiff = Infinity;
            
            for (const event of fallbackEvents) {
              const diff = event.startDate - now;
              if (diff > 0 && diff < minDiff) {
                minDiff = diff;
                nearestEvent = event;
              }
            }
            
            if (nearestEvent) {
              const daysUntil = Math.ceil(minDiff / (24 * 60 * 60 * 1000));
              return {
                id: nearestEvent.id,
                title: nearestEvent.title,
                subtitle: `ê°œë§‰ D-${daysUntil}`,
                route: nearestEvent.route,
                emoji: nearestEvent.emoji,
                bgColor: 'bg-gray-800'
              };
            }
            
            return null;
          };
          
          const updatedSportsData = useMemo(() => {
            const data = { ...sportsData };
            
            const getSeasonDates = () => {
              if (liveRankings?.seasonDates) {
                return liveRankings.seasonDates;
              }
              return {
                baseball: { start: '2025-03-29', end: '2025-10-05' },
                volleyball: { start: '2024-10-12', end: '2025-04-20' }
              };
            };
            
            const seasonDates = getSeasonDates();
            
            const isSeasonActive = (startDate, endDate) => {
              const now = new Date();
              const start = new Date(startDate);
              const end = new Date(endDate);
              return now >= start && now <= end;
            };
            
            if (liveRankings?.baseball) {
              data.baseball = { ...data.baseball, ranking: liveRankings.baseball };
            }
            
            const baseballActive = isSeasonActive(seasonDates.baseball.start, seasonDates.baseball.end);
            data.baseball.subtitle = baseballActive ? '2025 KBO ë¦¬ê·¸' : '2025 KBO ì‹œì¦Œ ìµœì¢… ìˆœìœ„';
            
            if (liveRankings?.volleyball) {
              data.volleyball = { 
                ...data.volleyball, 
                ranking: liveRankings.volleyball,
                nextMatch: liveRankings.volleyball.nextMatch || data.volleyball.nextMatch
              };
            }
            
            const volleyballActive = isSeasonActive(seasonDates.volleyball.start, seasonDates.volleyball.end);
            data.volleyball.subtitle = volleyballActive ? 'V-ë¦¬ê·¸ ì‹œì¦Œ ì¤‘' : 'V-ë¦¬ê·¸ ì˜¤í”„ì‹œì¦Œ';
            
            // ì•ˆì„¸ì˜ ë°°ë“œë¯¼í„´ ë­í‚¹ ì—…ë°ì´íŠ¸
            if (liveRankings?.badminton) {
              data.anseyoung = {
                ...data.anseyoung,
                subtitle: `ì„¸ê³„ ${liveRankings.badminton.rank}ìœ„`,
                ranking: liveRankings.badminton
              };
            }
            
            return data;
          }, [liveRankings]);

          const layout = useMemo(() => {
            const getSeasonDates = () => {
              if (liveRankings?.seasonDates) {
                return liveRankings.seasonDates;
              }
              return {
                baseball: { start: '2025-03-29', end: '2025-10-05' },
                volleyball: { start: '2024-10-12', end: '2025-04-20' }
              };
            };
            
            const seasonDates = getSeasonDates();
            
            const isSeasonActive = (startDate, endDate) => {
              const now = new Date();
              const start = new Date(startDate);
              const end = new Date(endDate);
              return now >= start && now <= end;
            };
            
            const baseballActive = isSeasonActive(
              seasonDates.baseball.start, 
              seasonDates.baseball.end
            );
            const volleyballActive = isSeasonActive(
              seasonDates.volleyball.start, 
              seasonDates.volleyball.end
            );
            
            const cards = [];
            
            if (volleyballActive) {
              cards.push(updatedSportsData.volleyball);
            }
            if (baseballActive) {
              cards.push(updatedSportsData.baseball);
            }
            
            if (!volleyballActive) {
              cards.push(updatedSportsData.volleyball);
            }
            if (!baseballActive) {
              cards.push(updatedSportsData.baseball);
            }
            
            const nearestEvent = getNearestMajorEvent(majorEventsData);
            if (cards.length < 3 && nearestEvent) {
              cards.push(nearestEvent);
            }
            
            cards.push(updatedSportsData.anseyoung);
            
            return cards.slice(0, 4);
          }, [updatedSportsData, liveRankings, majorEventsData]);
          
          const handleCardClick = (route) => {
            setCurrentRoute(route);
            setCurrentPage('detail');
          };
          
          const handleBackToHome = () => {
            setCurrentPage('home');
            setCurrentRoute('');
          };
          
          const formatUpdateTime = (dateString) => {
            const date = new Date(dateString);
            return date.toLocaleString('ko-KR', {
              month: 'short',
              day: 'numeric',
              hour: '2-digit',
              minute: '2-digit'
            });
          };
          
          if (isLoading) {
            return (
              <div className="h-screen bg-gray-900 flex items-center justify-center">
                <div className="text-center">
                  <div className="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mx-auto mb-4" />
                  <p className="text-white text-xl">ì‹¤ì‹œê°„ ìˆœìœ„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                </div>
              </div>
            );
          }
          
          if (currentPage === 'detail') {
            return (
              <div className="min-h-screen bg-gray-100 p-8">
                <div className="max-w-4xl mx-auto">
                  <button
                    onClick={handleBackToHome}
                    className="mb-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                  >
                    â† ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°
                  </button>
                  <div className="bg-white rounded-2xl p-12 shadow-lg">
                    <h1 className="text-4xl font-bold mb-4">ìƒì„¸ í˜ì´ì§€</h1>
                    <p className="text-gray-600 text-xl mb-8">ë¼ìš°íŠ¸: {currentRoute}</p>
                    <div className="bg-gray-50 p-8 rounded-xl">
                      <p className="text-gray-700 leading-relaxed">ì—¬ê¸°ì— ì‹¤ì œ ë°ì´í„°ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
                    </div>
                  </div>
                </div>
              </div>
            );
          }
          
          return (
            <div className="h-screen bg-gray-900 flex flex-col overflow-hidden">
              <header className="px-4 lg:px-6 py-3 bg-gray-800 flex flex-col lg:flex-row items-start lg:items-center justify-between gap-2 lg:gap-0">
                <div>
                  <h1 className="text-lg lg:text-xl font-bold text-white">MY SPORT</h1>
                  <p className="text-gray-400 text-xs">
                    {liveRankings ? (
                      <span className="text-green-400">
                        ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ({formatUpdateTime(liveRankings.lastUpdated)})
                      </span>
                    ) : (
                      <span className="text-yellow-400">
                        ì‹¤ì‹œê°„ ë°ì´í„° ì¤€ë¹„ ì¤‘...
                      </span>
                    )}
                  </p>
                </div>
                <p className="text-gray-500 text-xs hidden lg:block">ë‚˜ë§Œ ë³´ëŠ” í˜ì´ì§€</p>
              </header>
              <div className="flex-1 grid grid-cols-2 grid-rows-2 gap-0">
                {layout.map((card, index) => (
                  <SportCard
                    key={card?.id || `empty-${index}`}
                    data={card}
                    onClick={() => card && handleCardClick(card.route)}
                  />
                ))}
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SportsDashboard />);
    </script>
</body>
</html>
